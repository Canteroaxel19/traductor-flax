<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Traductor Flax - Ultra Pro Max</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://unpkg.com/tesseract.js@v4.0.1/dist/tesseract.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>

    <style>
        :root { --bg: #070b14; --card: rgba(30, 41, 59, 0.4); --accent: #3b82f6; }
        body.theme-neon { --bg: #0d001a; --accent: #ff00ff; }
        body.theme-gold { --bg: #1a1a00; --accent: #ffd700; }
        body.theme-emerald { --bg: #001a0d; --accent: #10b981; }
        body.theme-ruby { --bg: #1a0000; --accent: #ef4444; }
        body.theme-obsidian { --bg: #000000; --accent: #ffffff; }

        body { background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; transition: 0.5s; overflow-x: hidden; width: 100vw; }
        .glass-card { background: var(--card); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 1.5rem; width: 100%; }

        .shimmer-sync { position: relative; overflow: hidden; }
        .shimmer-sync::after {
            content: ''; position: absolute; top: -50%; left: -150%; width: 50%; height: 200%;
            background: rgba(255, 255, 255, 0.3); transform: rotate(30deg);
            animation: syncShimmer 10s infinite;
        }
        @keyframes syncShimmer { 0% { left: -150%; } 10% { left: 150%; } 100% { left: 150%; } }

        /* Animaci√≥n Joystick */
        .jump-icon { display: inline-block; animation: jump 2s infinite; }
        @keyframes jump {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        #welcome-modal, #star-modal { display: none; position: fixed; inset: 0; z-index: 500; background: rgba(0,0,0,0.95); backdrop-filter: blur(15px); align-items: center; justify-content: center; padding: 20px; }
        #editor-modal { display: none; position: fixed; inset: 0; z-index: 600; background: #000; flex-direction: column; }
        .tab-active { border-bottom: 2px solid var(--accent); color: var(--accent); }
        
        #scan-loader { display: none; position: absolute; inset: 0; background: rgba(0,0,0,0.8); z-index: 50; align-items: center; justify-content: center; border-radius: 1.5rem; flex-direction: column; }
        .mic-active { color: #ef4444; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

        .lang-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; max-height: 300px; overflow-y: auto; padding-right: 5px; }
        .lang-btn { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 10px; border-radius: 12px; font-size: 11px; text-align: left; transition: 0.3s; }
        .lang-btn.selected { background: var(--accent); border-color: var(--accent); color: white; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <div id="welcome-modal">
        <div class="glass-card p-6 w-full max-w-sm text-center space-y-4 border-y-4 border-blue-500">
            <h2 class="text-3xl font-black italic"><span class="text-white" id="modal-title-left">TRADUCTOR</span> <span class="text-blue-500">FLAX</span></h2>
            
            <div id="step1" class="space-y-4">
                <p class="text-slate-400 font-bold text-[10px] uppercase tracking-widest">Select Language / Selecciona Idioma</p>
                <div class="lang-grid" id="langGridContainer"></div>
                <button onclick="goToStep2()" class="w-full py-4 bg-blue-600 rounded-xl font-black uppercase tracking-widest text-xs" id="btnNext">SIGUIENTE</button>
            </div>

            <div id="step2" class="hidden space-y-4">
                <p id="welcomeMsg" class="text-slate-300 font-bold text-sm leading-tight"></p>
                <input type="text" id="userNameInput" class="w-full bg-slate-900/80 p-4 rounded-xl border border-white/10 text-center text-white outline-none focus:border-blue-500" placeholder="">
                <button onclick="guardarUsuario()" class="w-full py-4 bg-blue-600 rounded-xl font-black uppercase tracking-widest text-xs" id="btnStart">COMENZAR</button>
            </div>
        </div>
    </div>

    <header class="p-4 sticky top-0 z-50 bg-[#070b14]/90 border-b border-white/5">
        <div class="flex flex-col items-center mb-2">
            <div class="flex gap-2 text-sm mb-1 shimmer-sync">
                <span>üá∫üá∏</span><span>üá™üá∏</span><span>üáßüá∑</span><span>üá´üá∑</span><span>üá©üá™</span><span>üáÆüáπ</span><span>üáØüáµ</span><span>üá∞üá∑</span>
            </div>
            <h1 class="text-2xl font-black italic tracking-tighter shimmer-sync">
                <span class="text-white" id="ui-title-main">TRADUCTOR</span> <span class="text-blue-500">FLAX</span>
            </h1>
        </div>
        <div class="flex justify-between items-center">
            <div id="userHeaderName" class="text-[10px] font-bold text-blue-400 uppercase tracking-widest"></div>
            <select id="themeSelect" onchange="changeTheme()" class="bg-slate-800/80 text-[10px] p-1.5 rounded-lg text-white border border-white/10 outline-none">
                <option value="classic" id="opt-ocean">üåë Oc√©ano</option>
                <option value="neon" id="opt-neon">üß¨ Ne√≥n</option>
                <option value="gold" id="opt-gold">‚ú® Oro</option>
                <option value="emerald" id="opt-emerald">üåø Verde</option>
                <option value="ruby" id="opt-ruby">üåπ Rojo</option>
                <option value="obsidian" id="opt-obsidian">üåë Negro</option>
            </select>
        </div>
    </header>

    <main class="space-y-5 flex-1 mx-auto p-4 w-full max-w-lg">
        <div class="glass-card p-5 border-l-4 border-yellow-500">
            <h4 class="text-[8px] font-black text-yellow-500 uppercase tracking-widest mb-3"><span id="ui-mentality-text">MENTALIDAD</span> <span class="text-white">FLAX</span></h4>
            <p id="phraseMain" class="text-lg font-bold text-slate-200 italic leading-snug"></p>
        </div>

        <div class="flex justify-between items-center">
            <div>
                <h2 id="userNameDisplay" class="text-3xl font-black"></h2>
                <p id="ui-discover" class="text-lg font-bold text-blue-500"></p>
            </div>
            <a href="https://www.blipzi.com/es/" target="_blank" class="jump-icon text-4xl text-yellow-500">
                <i class="fa-solid fa-gamepad"></i>
            </a>
        </div>

        <div class="space-y-3">
            <div class="flex items-center gap-2">
                <select id="l1" onchange="saveLangPref('l1')" class="flex-1 bg-slate-800/50 p-3 rounded-2xl text-[10px] font-bold border border-white/5 text-white outline-none"></select>
                <button onclick="intercambiarIdiomas()" class="w-10 h-10 bg-blue-600/20 rounded-full text-blue-400"><i class="fa-solid fa-right-left"></i></button>
                <select id="l2" onchange="saveLangPref('l2')" class="flex-1 bg-slate-800/50 p-3 rounded-2xl text-[10px] font-bold border border-white/5 text-blue-400 outline-none"></select>
            </div>
            
            <div class="glass-card p-5 relative min-h-[140px]">
                <div id="scan-loader">
                    <i class="fa-solid fa-circle-notch animate-spin text-3xl text-blue-500"></i>
                    <span class="text-[10px] font-bold mt-2" id="ui-analyzing">ANALIZANDO...</span>
                </div>
                <textarea id="tIn" class="w-full bg-transparent outline-none resize-none text-xl placeholder-slate-600 h-24"></textarea>
                <div class="flex justify-end gap-5 mt-2 items-center">
                    <button onclick="borrarTextoTraductor()" class="text-red-500/40 text-xl"><i class="fa-solid fa-trash-can"></i></button>
                    <button onclick="toggleMicrofono()" id="micBtn" class="text-blue-500 text-3xl transition-all"><i class="fa-solid fa-microphone"></i></button>
                    <label class="cursor-pointer text-blue-500 text-4xl">
                        <i class="fa-solid fa-image"></i>
                        <input type="file" id="fileIn" accept="image/*" class="hidden">
                    </label>
                </div>
            </div>
            
            <button onclick="traducir()" id="btn-translate-main" class="shimmer-sync w-full py-4 bg-blue-700 rounded-2xl font-black uppercase text-xs shadow-lg"></button>
            
            <div class="flex gap-2">
                <button onclick="abrirTraductorWeb()" id="ui-web-trans" class="flex-1 py-3 bg-slate-800/50 border border-white/10 rounded-2xl font-black uppercase text-[9px] text-blue-400 flex items-center justify-center gap-2 italic"></button>
                <button onclick="abrirEscrituraEstrella()" class="w-14 bg-slate-800/50 border border-white/10 rounded-2xl flex items-center justify-center text-yellow-500 text-lg">
                    <i id="mainStarIcon" class="fa-solid fa-star"></i>
                </button>
            </div>

            <div id="resultBox" class="glass-card p-5 border-l-4 border-blue-500">
                <div id="tOut" class="text-xl font-bold break-words">...</div>
                <div class="flex gap-5 mt-4 justify-end items-center">
                    <button onclick="hablarTextoTraductor()" class="text-blue-400 text-2xl"><i class="fa-solid fa-volume-high"></i></button>
                    <button onclick="guardarFavoritoRes()" class="text-slate-500 text-xl"><i id="resStarIcon" class="fa-solid fa-star"></i></button>
                    <button onclick="compartirWhatsApp()" class="text-green-500 text-2xl"><i class="fa-brands fa-whatsapp"></i></button>
                    <button onclick="copiarTexto('tOut')" class="text-blue-400 text-xl"><i class="fa-solid fa-copy"></i></button>
                </div>
            </div>
        </div>

        <div class="glass-card p-5 border border-white/5">
            <div class="flex justify-between items-center mb-3">
                <span class="text-[9px] font-black uppercase text-slate-500 tracking-widest flex items-center gap-2">
                    <i class="fa-solid fa-book text-blue-400"></i> <span id="ui-dict-title"></span>
                </span>
                <select id="searchLang" onchange="saveLangPref('searchLang')" class="bg-slate-800/50 text-[8px] font-bold p-1 px-2 rounded-md border border-white/10 text-blue-400 outline-none"></select>
            </div>
            <div class="flex gap-2 relative">
                <div class="relative flex-1">
                    <input type="text" id="searchInput" class="w-full bg-black/20 p-4 pr-10 rounded-2xl text-xs outline-none border border-white/5">
                    <button onclick="borrarBusqueda()" class="absolute right-3 top-1/2 -translate-y-1/2 text-red-500/50"><i class="fa-solid fa-circle-xmark"></i></button>
                </div>
                <button onclick="buscarDefinicion()" class="w-12 bg-blue-600 rounded-2xl flex items-center justify-center text-white"><i class="fa-solid fa-magnifying-glass"></i></button>
            </div>
            <div id="searchResult" class="hidden mt-3 space-y-2">
                <div id="searchMessage" class="bg-black/40 p-4 rounded-2xl border border-white/5 text-[11px] font-bold italic text-center text-blue-300">
                    Respuesta Encontrada Haz Click En Google o Wikipedia
                </div>
                <div class="flex gap-2">
                    <button onclick="externo('google')" class="flex-1 py-2 bg-blue-600 rounded-xl text-[10px] font-black">Google</button>
                    <button onclick="externo('wiki')" class="flex-1 py-2 bg-white text-black rounded-xl text-[10px] font-black">Wikipedia</button>
                </div>
            </div>
        </div>

        <div class="pb-8">
            <div class="flex gap-4 mb-3 px-1 border-b border-white/5">
                <button onclick="cambiarPestana('hist')" id="tabH" class="pb-2 text-[10px] font-black uppercase tab-active"></button>
                <button onclick="cambiarPestana('fav')" id="tabF" class="pb-2 text-[10px] font-black uppercase text-slate-500"></button>
                <button onclick="limpiarTodo()" id="ui-clear-all" class="ml-auto text-[9px] text-red-500 font-bold uppercase"></button>
            </div>
            <div id="historialList" class="space-y-2"></div>
        </div>
    </main>

    <div id="star-modal">
        <div class="glass-card p-6 w-full max-w-xs space-y-4 border-t-4 border-yellow-500">
            <h3 id="ui-star-title" class="text-xs font-black text-yellow-500 uppercase text-center"></h3>
            <textarea id="starInput" class="w-full bg-slate-900/90 p-4 rounded-xl text-white outline-none border border-white/10 h-32 text-sm"></textarea>
            <div class="flex gap-2">
                <button onclick="cerrarEscrituraEstrella()" id="ui-star-close" class="flex-1 py-3 bg-slate-700 rounded-xl text-[10px] font-black uppercase"></button>
                <button onclick="confirmarGuardadoEstrella()" id="ui-star-save" class="flex-1 py-3 bg-yellow-500 rounded-xl text-[10px] font-black uppercase text-black"></button>
            </div>
        </div>
    </div>

    <div id="editor-modal">
        <div class="flex justify-between items-center p-4 bg-slate-900 border-b border-white/10">
            <button onclick="cancelarEdicion()" class="text-white text-xl"><i class="fa-solid fa-xmark"></i></button>
            <span class="text-xs font-black uppercase tracking-widest text-blue-400">Editor Flax</span>
            <div class="w-6"></div>
        </div>
        <div class="flex-1 flex items-center justify-center bg-black overflow-hidden relative">
            <img id="image-to-edit" style="max-width: 100%; display: block;">
        </div>
        <div class="p-6 bg-slate-900 flex justify-center">
            <button onclick="procesarImagen()" id="btnAnalizarImg" class="bg-blue-600 text-white font-black px-12 py-4 rounded-full uppercase text-sm tracking-widest shadow-2xl active:scale-95 transition-all">
                ANALIZAR
            </button>
        </div>
    </div>

    <script>
        const uiLangs = {
            "es": { name: "Espa√±ol üá™üá∏", title: "TRADUCTOR", mentality: "MENTALIDAD", discover: "¬øQu√© vamos a descubrir hoy?", input: "Escribe un texto", translate: "TRADUCIR", web: "TRADUCTOR WEB", history: "Historial", favs: "Favoritos ‚òÖ", clear: "Borrar Todo", analyzing: "ANALIZANDO...", welcome: "Bienvenido A Tu Herramienta De Traducci√≥n Digital Gratis", namePh: "Tu nombre aqu√≠", btnStart: "COMENZAR", btnNext: "SIGUIENTE", search: "Buscar concepto...", dict: "Diccionario Global", resFound: "Respuesta Encontrada Haz Click En Google o Wikipedia", ocean: "üåë Oc√©ano", neon: "üß¨ Ne√≥n", gold: "‚ú® Oro", emerald: "üåø Verde", ruby: "üåπ Rojo", obsidian: "üåë Negro", starTitle: "GUARDAR TEXTO O URL", starClose: "Cerrar", starSave: "Guardar", greetings: "¬°Hola, ", 
                   frases: ["La disciplina vence a la inteligencia.", "El esfuerzo constante rinde frutos.", "No te detengas hasta estar orgulloso.", "La sabidur√≠a es el silencio del sabio.", "Enf√≥cate en el progreso, no en la perfecci√≥n.", "Cada paso cuenta en tu camino digital.", "El √©xito es la suma de peque√±os esfuerzos."] },
            "en": { name: "Ingl√©s üá∫üá∏", title: "TRANSLATOR", mentality: "MENTALITY", discover: "What shall we discover today?", input: "Write text", translate: "TRANSLATE", web: "WEB TRANSLATOR", history: "History", favs: "Favorites ‚òÖ", clear: "Clear All", analyzing: "ANALYZING...", welcome: "Welcome To Your Free Digital Translation Tool", namePh: "Your name here", btnStart: "START", btnNext: "NEXT", search: "Search concept...", dict: "Global Dictionary", resFound: "Result Found Click Google or Wikipedia", ocean: "üåë Ocean", neon: "üß¨ Neon", gold: "‚ú® Gold", emerald: "üåø Emerald", ruby: "üåπ Ruby", obsidian: "üåë Obsidian", starTitle: "SAVE TEXT OR URL", starClose: "Close", starSave: "Save", greetings: "Hello, ", 
                   frases: ["Discipline beats intelligence.", "Constant effort pays off.", "Don't stop until you're proud.", "Wisdom is the silence of the wise.", "Focus on progress, not perfection.", "Every step counts on your digital journey.", "Success is the sum of small efforts."] },
            "pt": { name: "Portugu√©s üáßüá∑", title: "TRADUTOR", mentality: "MENTALIDADE", discover: "O que vamos descobrir hoje?", input: "Escreva um texto", translate: "TRADUZIR", web: "TRADUTOR WEB", history: "Hist√≥rico", favs: "Favoritos ‚òÖ", clear: "Limpar Tudo", analyzing: "ANALISANDO...", welcome: "Bem-vindo √† Sua Ferramenta de Tradu√ß√£o Digital Gratuita", namePh: "Seu nome aqui", btnStart: "COME√áAR", btnNext: "PR√ìXIMO", search: "Buscar conceito...", dict: "Dicion√°rio Global", resFound: "Resposta Encontrada Clique em Google ou Wikipedia", ocean: "üåë Oceano", neon: "üß¨ Neon", gold: "‚ú® Ouro", emerald: "üåø Esmeralda", ruby: "üåπ Rubi", obsidian: "üåë Obsidiana", starTitle: "SALVAR TEXTO OU URL", starClose: "Fechar", starSave: "Salvar", greetings: "Ol√°, ",
                   frases: ["A disciplina vence a intelig√™ncia.", "Esfor√ßo constante traz resultados.", "N√£o pare at√© se orgulhar.", "A sabedoria √© o sil√™ncio do s√°bio.", "Foque no progresso, n√£o na perfei√ß√£o.", "Cada passo conta em sua jornada digital.", "O sucesso √© a soma de pequenos esfor√ßos."] },
            "zh": { name: "Chino üá®üá≥", title: "ÁøªËØëÂô®", mentality: "ÂøÉÊÄÅ", discover: "‰ªäÂ§©Êàë‰ª¨Ë¶ÅÂèëÁé∞‰ªÄ‰πàÔºü", input: "ËæìÂÖ•ÊñáÊú¨", translate: "ÁøªËØë", web: "ÁΩëÈ°µÁøªËØë", history: "ÂéÜÂè≤ËÆ∞ÂΩï", favs: "Êî∂Ëóè ‚òÖ", clear: "ÂÖ®ÈÉ®Ê∏ÖÈô§", analyzing: "Ê≠£Âú®ÂàÜÊûê...", welcome: "Ê¨¢Ëøé‰ΩøÁî®ÊÇ®ÁöÑÂÖçË¥πÊï∞Â≠óÁøªËØëÂ∑•ÂÖ∑", namePh: "ÊÇ®ÁöÑÂêçÂ≠ó", btnStart: "ÂºÄÂßã", btnNext: "‰∏ã‰∏ÄÊ≠•", search: "ÊêúÁ¥¢Ê¶ÇÂøµ...", dict: "ÂÖ®ÁêÉËØçÂÖ∏", resFound: "ÊâæÂà∞ÁªìÊûú", ocean: "üåë Êµ∑Ê¥ã", neon: "üß¨ ÈúìËôπ", gold: "‚ú® ÈªÑÈáë", emerald: "üåø Áø°Áø†", ruby: "üåπ Á∫¢ÂÆùÁü≥", obsidian: "üåë ÈªëÊõúÁü≥", starTitle: "‰øùÂ≠òÊñáÊú¨Êàñ URL", starClose: "ÂÖ≥Èó≠", starSave: "‰øùÂ≠ò", greetings: "‰Ω†Â•ΩÔºå",
                   frases: ["Ëá™ÂæãËÉúËøáËÅ™Êòé„ÄÇ", "‰∏çÊñ≠ÁöÑÂä™Âäõ‰ºöÊúâÂõûÊä•„ÄÇ", "Áõ¥Âà∞‰Ω†ÊÑüÂà∞Ëá™Ë±™ÊâçÂÅúÊ≠¢„ÄÇ", "Êô∫ÊÖßÊòØÊô∫ËÄÖÁöÑÊ≤âÈªò„ÄÇ", "‰∏ìÊ≥®‰∫éËøõÊ≠•ÔºåËÄå‰∏çÊòØÂÆåÁæé„ÄÇ", "Êï∞Â≠óÊóÖÁ®ã‰∏≠ÁöÑÊØè‰∏ÄÊ≠•ÈÉΩÂæàÈáçË¶Å„ÄÇ", "ÊàêÂäüÊòØÂ∞èÂä™ÂäõÁöÑÊÄªÂíå„ÄÇ"] },
            "ja": { name: "Japon√©s üáØüáµ", title: "ÁøªË®≥ËÄÖ", mentality: "„É°„É≥„Çø„É™„ÉÜ„Ç£", discover: "‰ªäÊó•„ÅØ‰Ωï„ÇíÁô∫Ë¶ã„Åó„Åæ„Åó„Çá„ÅÜ„ÅãÔºü", input: "„ÉÜ„Ç≠„Çπ„Éà„ÇíÂÖ•Âäõ", translate: "ÁøªË®≥„Åô„Çã", web: "„Ç¶„Çß„ÉñÁøªË®≥", history: "Â±•Ê≠¥", favs: "„ÅäÊ∞ó„Å´ÂÖ•„Çä ‚òÖ", clear: "„Åô„Åπ„Å¶ÂâäÈô§", analyzing: "ÂàÜÊûê‰∏≠...", welcome: "ÁÑ°Êñô„Éá„Ç∏„Çø„É´ÁøªË®≥„ÉÑ„Éº„É´„Å∏„Çà„ÅÜ„Åì„Åù", namePh: "„ÅäÂêçÂâç", btnStart: "ÈñãÂßã", btnNext: "Ê¨°„Å∏", search: "Ê¶ÇÂøµ„ÇíÊ§úÁ¥¢...", dict: "„Ç∞„É≠„Éº„Éê„É´ËæûÊõ∏", resFound: "ÁµêÊûú„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åó„Åü", ocean: "üåë „Ç™„Éº„Ç∑„É£„É≥", neon: "üß¨ „Éç„Ç™„É≥", gold: "‚ú® „Ç¥„Éº„É´„Éâ", emerald: "üåø „Ç®„É°„É©„É´„Éâ", ruby: "üåπ „É´„Éì„Éº", obsidian: "üåë „Ç™„Éñ„Ç∑„Éá„Ç£„Ç¢„É≥", starTitle: "„ÉÜ„Ç≠„Çπ„Éà„Åæ„Åü„ÅØURL„Çí‰øùÂ≠ò", starClose: "Èñâ„Åò„Çã", starSave: "‰øùÂ≠ò", greetings: "„Åì„Çì„Å´„Å°„ÅØ„ÄÅ",
                   frases: ["Ë¶èÂæã„ÅØÁü•ÊÄß„Å´Âãù„Çã„ÄÇ", "Áµ∂„ÅàÈñì„Å™„ÅÑÂä™Âäõ„ÅØÂ†±„Çè„Çå„Çã„ÄÇ", "Ë™á„Çä„Å´ÊÄù„ÅÜ„Åæ„ÅßÁ´ã„Å°Ê≠¢„Åæ„Çâ„Å™„ÅÑ„Åß„ÄÇ", "Áü•ÊÅµ„ÅØË≥¢ËÄÖ„ÅÆÊ≤àÈªô„Åß„ÅÇ„Çã„ÄÇ", "ÂÆåÁíß„Åß„ÅØ„Å™„ÅèÈÄ≤Ê≠©„Å´ÁÑ¶ÁÇπ„ÇíÂΩì„Å¶„Çã„ÄÇ", "„Éá„Ç∏„Çø„É´„Ç∏„É£„Éº„Éã„Éº„ÅÆ„Åô„Åπ„Å¶„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó„ÅåÈáçË¶Å„Åß„Åô„ÄÇ", "ÊàêÂäü„ÅØÂ∞è„Åï„Å™Âä™Âäõ„ÅÆÁ©ç„ÅøÈáç„Å≠„Åß„Åô„ÄÇ"] },
            "hi": { name: "Hindi üáÆüá≥", title: "‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶‡§ï", mentality: "‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï‡§§‡§æ", discover: "‡§Ü‡§ú ‡§π‡§Æ ‡§ï‡•ç‡§Ø‡§æ ‡§ñ‡•ã‡§ú‡•á‡§Ç‡§ó‡•á?", input: "‡§™‡§æ‡§† ‡§≤‡§ø‡§ñ‡•á‡§Ç", translate: "‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶ ‡§ï‡§∞‡•á‡§Ç", web: "‡§µ‡•á‡§¨ ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶‡§ï", history: "‡§á‡§§‡§ø‡§π‡§æ‡§∏", favs: "‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‚òÖ", clear: "‡§∏‡§≠‡•Ä ‡§∏‡§æ‡§´ ‡§ï‡§∞‡•á‡§Ç", analyzing: "‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à...", welcome: "‡§Ü‡§™‡§ï‡•á ‡§Æ‡•Å‡§´‡•ç‡§§ ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶ ‡§â‡§™‡§ï‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à", namePh: "‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§Ø‡§π‡§æ‡§Å", btnStart: "‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç", btnNext: "‡§Ö‡§ó‡§≤‡§æ", search: "‡§Ö‡§µ‡§ß‡§æ‡§∞‡§£‡§æ ‡§ñ‡•ã‡§ú‡•á‡§Ç...", dict: "‡§µ‡•à‡§∂‡•ç‡§µ‡§ø‡§ï ‡§∂‡§¨‡•ç‡§¶‡§ï‡•ã‡§∂", resFound: "‡§â‡§§‡•ç‡§§‡§∞ ‡§Æ‡§ø‡§≤ ‡§ó‡§Ø‡§æ", ocean: "üåë ‡§Æ‡§π‡§æ‡§∏‡§æ‡§ó‡§∞", neon: "üß¨ ‡§®‡§ø‡§Ø‡•â‡§®", gold: "‚ú® ‡§∏‡•ã‡§®‡§æ", emerald: "üåø ‡§™‡§®‡•ç‡§®‡§æ", ruby: "üåπ ‡§Æ‡§æ‡§£‡§ø‡§ï", obsidian: "üåë ‡§ì‡§¨‡•ç‡§∏‡•Ä–¥‡§ø‡§Ø‡§®", starTitle: "‡§™‡§æ‡§† ‡§Ø‡§æ URL ‡§∏‡§π‡•á‡§ú‡•á‡§Ç", starClose: "‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç", starSave: "‡§∏‡§π‡•á‡§ú‡•á‡§Ç", greetings: "‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ",
                   frases: ["‡§Ö‡§®‡•Å‡§∂‡§æ‡§∏‡§® ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø ‡§ï‡•ã ‡§Æ‡§æ‡§§ ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§", "‡§®‡§ø‡§∞‡§Ç‡§§‡§∞ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§∞‡§Ç‡§ó ‡§≤‡§æ‡§§‡§æ ‡§π‡•à‡•§", "‡§ú‡§¨ ‡§§‡§ï ‡§ó‡§∞‡•ç‡§µ ‡§® ‡§π‡•ã, ‡§§‡§¨ ‡§§‡§ï ‡§® ‡§∞‡•Å‡§ï‡•á‡§Ç‡•§", "‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§§‡•ç‡§§‡§æ ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§æ‡§® ‡§ï‡§æ ‡§Æ‡•å‡§® ‡§π‡•à‡•§", "‡§™‡•Ç‡§∞‡•ç‡§£‡§§‡§æ ‡§™‡§∞ ‡§®‡§π‡•Ä‡§Ç, ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§™‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç‡•§", "‡§Ü‡§™‡§ï‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§Æ‡•á‡§Ç ‡§π‡§∞ ‡§ï‡§¶‡§Æ ‡§Æ‡§æ‡§Ø‡§®‡•á ‡§∞‡§ñ‡§§‡§æ ‡§π‡•à‡•§", "‡§∏‡§´‡§≤‡§§‡§æ ‡§õ‡•ã‡§ü‡•á ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏‡•ã‡§Ç ‡§ï‡§æ ‡§Ø‡•ã‡§ó ‡§π‡•à‡•§"] },
            "ar": { name: "√Årabe üá∏üá¶", title: "ŸÖÿ™ÿ±ÿ¨ŸÖ", mentality: "ÿπŸÇŸÑŸäÿ©", discover: "ŸÖÿßÿ∞ÿß ÿ≥ŸÜŸÉÿ™ÿ¥ŸÅ ÿßŸÑŸäŸàŸÖÿü", input: "ÿßŸÉÿ™ÿ® ŸÜÿµÿßŸã", translate: "ÿ™ÿ±ÿ¨ŸÖ", web: "ŸÖÿ™ÿ±ÿ¨ŸÖ ÿßŸÑŸàŸäÿ®", history: "ÿßŸÑÿ≥ÿ¨ŸÑ", favs: "ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© ‚òÖ", clear: "ŸÖÿ≥ÿ≠ ÿßŸÑŸÉŸÑ", analyzing: "ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ...", welcome: "ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ÿ£ÿØÿßÿ© ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ© ÿßŸÑÿ±ŸÇŸÖŸäÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©", namePh: "ÿßÿ≥ŸÖŸÉ ŸáŸÜÿß", btnStart: "ÿßÿ®ÿØÿ£", btnNext: "ÿßŸÑÿ™ÿßŸÑŸä", search: "ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑŸÖŸÅŸáŸàŸÖ...", dict: "ŸÇÿßŸÖŸàÿ≥ ÿπÿßŸÑŸÖŸä", resFound: "ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©", ocean: "üåë ŸÖÿ≠Ÿäÿ∑", neon: "üß¨ ŸÜŸäŸàŸÜ", gold: "‚ú® ÿ∞Ÿáÿ®", emerald: "üåø ÿ≤ŸÖÿ±ÿØ", ruby: "üåπ ŸäÿßŸÇŸàÿ™", obsidian: "üåë ÿ£Ÿàÿ®ÿ≥ŸäÿØŸäÿßŸÜ", starTitle: "ÿ≠ŸÅÿ∏ ŸÜÿµ ÿ£Ÿà ÿ±ÿßÿ®ÿ∑", starClose: "ÿ•ÿ∫ŸÑÿßŸÇ", starSave: "ÿ≠ŸÅÿ∏", greetings: "ŸÖÿ±ÿ≠ÿ®ÿßŸãÿå ",
                   frases: ["ÿßŸÑÿßŸÜÿ∂ÿ®ÿßÿ∑ Ÿäÿ™ŸÅŸàŸÇ ÿπŸÑŸâ ÿßŸÑÿ∞ŸÉÿßÿ°.", "ÿßŸÑÿ¨ŸáÿØ ÿßŸÑŸÖÿ≥ÿ™ŸÖÿ± Ÿäÿ§ÿ™Ÿä ÿ´ŸÖÿßÿ±Ÿá.", "ŸÑÿß ÿ™ÿ™ŸàŸÇŸÅ ÿ≠ÿ™Ÿâ ÿ™ŸÅÿÆÿ± ÿ®ŸÜŸÅÿ≥ŸÉ.", "ÿßŸÑÿ≠ŸÉŸÖÿ© ŸáŸä ÿµŸÖÿ™ ÿßŸÑÿ≠ŸÉŸäŸÖ.", "ÿ±ŸÉÿ≤ ÿπŸÑŸâ ÿßŸÑÿ™ŸÇÿØŸÖ ŸàŸÑŸäÿ≥ ÿßŸÑŸÉŸÖÿßŸÑ.", "ŸÉŸÑ ÿÆÿ∑Ÿàÿ© ŸÖŸáŸÖÿ© ŸÅŸä ÿ±ÿ≠ŸÑÿ™ŸÉ ÿßŸÑÿ±ŸÇŸÖŸäÿ©.", "ÿßŸÑŸÜÿ¨ÿßÿ≠ ŸáŸà ŸÖÿ¨ŸÖŸàÿπ ÿßŸÑÿ¨ŸáŸàÿØ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ©."] },
            "ru": { name: "Ruso üá∑üá∫", title: "–ü–ï–†–ï–í–û–î–ß–ò–ö", mentality: "–ú–ï–ù–¢–ê–õ–ò–¢–ï–¢", discover: "–ß—Ç–æ –º—ã –æ—Ç–∫—Ä–æ–µ–º —Å–µ–≥–æ–¥–Ω—è?", input: "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç", translate: "–ü–ï–†–ï–í–ï–°–¢–ò", web: "–í–ï–ë-–ü–ï–†–ï–í–û–î–ß–ò–ö", history: "–ò—Å—Ç–æ—Ä–∏—è", favs: "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ ‚òÖ", clear: "–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë", analyzing: "–ê–ù–ê–õ–ò–ó...", welcome: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≤–∞—à –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫", namePh: "–í–∞—à–µ –∏–º—è", btnStart: "–ù–ê–ß–ê–¢–¨", btnNext: "–î–ê–õ–ï–ï", search: "–ü–æ–∏—Å–∫ –ø–æ–Ω—è—Ç–∏—è...", dict: "–ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å", resFound: "–û—Ç–≤–µ—Ç –Ω–∞–π–¥–µ–Ω", ocean: "üåë –û–∫–µ–∞–Ω", neon: "üß¨ –ù–µ–æ–Ω", gold: "‚ú® –ó–æ–ª–æ—Ç–æ", emerald: "üåø –ò–∑—É–º—Ä—É–¥", ruby: "üåπ –†—É–±–∏–Ω", obsidian: "üåë –û–±—Å–∏–¥–∏–∞–Ω", starTitle: "–°–û–•–†–ê–ù–ò–¢–¨ –¢–ï–ö–°–¢ –ò–õ–ò URL", starClose: "–ó–∞–∫—Ä—ã—Ç—å", starSave: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å", greetings: "–ü—Ä–∏–≤–µ—Ç, ",
                   frases: ["–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –±—å–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç.", "–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —É—Å–∏–ª–∏—è –æ–∫—É–ø–∞—é—Ç—Å—è.", "–ù–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—à—å –≥–æ—Ä–¥–∏—Ç—å—Å—è.", "–ú—É–¥—Ä–æ—Å—Ç—å ‚Äî —ç—Ç–æ –º–æ–ª—á–∞–Ω–∏–µ –º—É–¥—Ä–µ—Ü–∞.", "–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Ç–µ—Å—å –Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ, –∞ –Ω–µ –Ω–∞ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–µ.", "–ö–∞–∂–¥—ã–π —à–∞–≥ –≤–∞–∂–µ–Ω –Ω–∞ –≤–∞—à–µ–º —Ü–∏—Ñ—Ä–æ–≤–æ–º –ø—É—Ç–∏.", "–£—Å–ø–µ—Ö ‚Äî —ç—Ç–æ —Å—É–º–º–∞ –º–∞–ª—ã—Ö —É—Å–∏–ª–∏–π."] },
            "de": { name: "Alem√°n üá©üá™", title: "√úBERSETZER", mentality: "MENTALIT√ÑT", discover: "Was werden wir heute entdecken?", input: "Text eingeben", translate: "√úBERSETZEN", web: "WEB-√úBERSETZER", history: "Verlauf", favs: "Favoriten ‚òÖ", clear: "Alles l√∂schen", analyzing: "ANALYSE...", welcome: "Willkommen zu Ihrem kostenlosen digitalen √úbersetzungstool", namePh: "Ihr Name hier", btnStart: "STARTEN", btnNext: "WEITER", search: "Konzept suchen...", dict: "Globales W√∂rterbuch", resFound: "Antwort gefunden", ocean: "üåë Ozean", neon: "üß¨ Neon", gold: "‚ú® Gold", emerald: "üåø Smaragd", ruby: "üåπ Rubin", obsidian: "üåë Obsidian", starTitle: "TEXT ODER URL SPEICHERN", starClose: "Schlie√üen", starSave: "Speichern", greetings: "Hallo, ",
                   frases: ["Disziplin schl√§gt Intelligenz.", "Stetige Anstrengung zahlt sich aus.", "H√∂r erst auf, wenn du stolz bist.", "Weisheit ist das Schweigen des Weisen.", "Konzentriere dich auf Fortschritt, nicht auf Perfektion.", "Jeder Schritt z√§hlt auf deiner digitalen Reise.", "Erfolg ist die Summe kleiner Anstrengungen."] },
            "ko": { name: "Coreano üá∞üá∑", title: "Î≤àÏó≠Í∏∞", mentality: "Ï†ïÏã†", discover: "Ïò§ÎäòÏùÄ Î¨¥ÏóáÏùÑ Î∞úÍ≤¨Ìï†ÍπåÏöî?", input: "ÌÖçÏä§Ìä∏ ÏûÖÎ†•", translate: "Î≤àÏó≠ÌïòÍ∏∞", web: "Ïõπ Î≤àÏó≠Í∏∞", history: "Í∏∞Î°ù", favs: "Ï¶êÍ≤®Ï∞æÍ∏∞ ‚òÖ", clear: "Î™®Îëê ÏÇ≠Ï†ú", analyzing: "Î∂ÑÏÑù Ï§ë...", welcome: "Î¨¥Î£å ÎîîÏßÄÌÑ∏ Î≤àÏó≠ ÎèÑÍµ¨Ïóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§", namePh: "Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî", btnStart: "ÏãúÏûë", btnNext: "Îã§Ïùå", search: "Í∞úÎÖê Í≤ÄÏÉâ...", dict: "Í∏ÄÎ°úÎ≤å ÏÇ¨Ï†Ñ", resFound: "Í≤∞Í≥ºÎ•º Ï∞æÏïòÏäµÎãàÎã§", ocean: "üåë Ïò§ÏÖò", neon: "üß¨ ÎÑ§Ïò®", gold: "‚ú® Í≥®Îìú", emerald: "üåø ÏóêÎ©îÎûÑÎìú", ruby: "üåπ Î£®ÎπÑ", obsidian: "üåë ÏòµÏãúÎîîÏñ∏", starTitle: "ÌÖçÏä§Ìä∏ ÎòêÎäî URL Ï†ÄÏû•", starClose: "Îã´Í∏∞", starSave: "Ï†ÄÏû•", greetings: "ÏïàÎÖïÌïòÏÑ∏Ïöî, ",
                   frases: ["Ï†àÏ†úÎäî ÏßÄÎä•ÏùÑ Ïù¥ÍπÅÎãàÎã§.", "ÏßÄÏÜçÏ†ÅÏù∏ ÎÖ∏Î†•ÏùÄ Í≤∞Ïã§ÏùÑ Îß∫ÏäµÎãàÎã§.", "ÏûêÎûëÏä§Îü¨Ïö∏ ÎïåÍπåÏßÄ Î©àÏ∂îÏßÄ ÎßàÏÑ∏Ïöî.", "ÏßÄÌòúÎäî ÌòÑÏûêÏùò Ïπ®Î¨µÏûÖÎãàÎã§.", "ÏôÑÎ≤ΩÌï®Ïù¥ ÏïÑÎãå Î∞úÏ†ÑÏóê ÏßëÏ§ëÌïòÏÑ∏Ïöî.", "ÎîîÏßÄÌÑ∏ Ïó¨Ï†ïÏùò Î™®Îì† Îã®Í≥ÑÍ∞Ä Ï§ëÏöîÌï©ÎãàÎã§.", "ÏÑ±Í≥µÏùÄ ÏûëÏùÄ ÎÖ∏Î†•Ïùò Ìï©Í≥ÑÏûÖÎãàÎã§."] },
            "bn": { name: "Bengal√≠ üáßüá©", title: "‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶‡¶ï", mentality: "‡¶Æ‡¶æ‡¶®‡¶∏‡¶ø‡¶ï‡¶§‡¶æ", discover: "‡¶Ü‡¶ú ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ï‡¶ø ‡¶Ü‡¶¨‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨?", input: "‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®", translate: "‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‡¶ï‡¶∞‡ßÅ‡¶®", web: "‡¶ì‡¶Ø‡¶º‡ßá‡¶¨ ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶‡¶ï", history: "‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏", favs: "‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‚òÖ", clear: "‡¶∏‡¶¨ ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®", analyzing: "‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...", welcome: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶®‡¶æ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡ßá ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‡¶ü‡ßÅ‡¶≤‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ", namePh: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá", btnStart: "‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®", btnNext: "‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ", search: "‡¶ß‡¶æ‡¶∞‡¶£‡¶æ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®...", dict: "‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶°‡¶ø‡¶ï‡¶∂‡¶®‡¶æ‡¶∞‡¶ø", resFound: "‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶ó‡ßá‡¶õ‡ßá", ocean: "üåë ‡¶Æ‡¶π‡¶æ‡¶∏‡¶æ‡¶ó‡¶∞", neon: "üß¨ ‡¶®‡¶ø‡¶Ø‡¶º‡¶®", gold: "‚ú® ‡¶∏‡ßã‡¶®‡¶æ", emerald: "üåø ‡¶™‡¶æ‡¶®‡ßç‡¶®‡¶æ", ruby: "üåπ ‡¶∞‡ßÅ‡¶¨‡¶ø", obsidian: "üåë ‡¶Ö‡¶¨‡¶∏‡¶ø‡¶°‡¶ø‡¶Ø‡¶º‡¶æ‡¶®", starTitle: "‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶¨‡¶æ URL ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®", starClose: "‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®", starSave: "‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®", greetings: "‡¶π‡ßç‡¶Ø‡¶æ‡¶≤‡ßã, ",
                   frases: ["‡¶∂‡ßÉ‡¶ô‡ßç‡¶ñ‡¶≤‡¶æ ‡¶¨‡ßÅ‡¶¶‡ßç‡¶ß‡¶ø‡¶ï‡ßá ‡¶π‡¶æ‡¶∞‡¶æ‡¶Ø‡¶º‡•§", "‡¶Ö‡¶¨‡¶ø‡¶∞‡¶æ‡¶Æ ‡¶™‡ßç‡¶∞‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶´‡¶≤ ‡¶¶‡ßá‡¶Ø‡¶º‡•§", "‡¶ó‡¶∞‡ßç‡¶¨‡¶ø‡¶§ ‡¶®‡¶æ ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶•‡¶æ‡¶Æ‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§", "‡¶™‡ßç‡¶∞‡¶ú‡ßç‡¶û‡¶æ ‡¶π‡¶≤‡ßã ‡¶ú‡ßç‡¶û‡¶æ‡¶®‡ßÄ‡¶∞ ‡¶®‡ßÄ‡¶∞‡¶¨‡¶§‡¶æ‡•§", "‡¶®‡¶ø‡¶ñ‡ßÅ‡¶Å‡§§ ‡¶®‡¶Ø‡¶º, ‡¶Ö‡¶ó‡ßç‡¶∞‡¶ó‡¶§‡¶ø‡¶∞ ‡¶¶‡¶ø‡¶ï‡ßá ‡¶Æ‡¶®‡ßã‡¶®‡¶ø‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§", "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ‡¶Ø‡¶º ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶™‡¶¶‡¶ï‡ßç‡¶∑‡ßá‡¶™ ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡•§", "‡¶∏‡¶æ‡¶´‡¶≤‡ßç‡¶Ø ‡¶π‡¶≤‡ßã ‡¶õ‡ßã‡¶ü ‡¶™‡ßç‡¶∞‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶∑‡ßç‡¶ü‡¶ø‡•§"] },
            "fr": { name: "Franc√©s üá´üá∑", title: "TRADUCTEUR", mentality: "MENTALIT√â", discover: "Que allons-nous d√©couvrir aujourd'hui ?", input: "√âcrire un texte", translate: "TRADUIRE", web: "TRADUCTEUR WEB", history: "Historique", favs: "Favoris ‚òÖ", clear: "Tout effacer", analyzing: "ANALYSE...", welcome: "Bienvenue sur votre outil de traduction num√©rique gratuit", namePh: "Votre nom ici", btnStart: "COMMENCER", btnNext: "SUIVANT", search: "Chercher un concept...", dict: "Dictionnaire Global", resFound: "R√©ponse trouv√©e", ocean: "üåë Oc√©an", neon: "üß¨ N√©on", gold: "‚ú® Or", emerald: "üåø √âmeraude", ruby: "üåπ Rubis", obsidian: "üåë Obsidienne", starTitle: "ENREGISTRER TEXTE OU URL", starClose: "Fermer", starSave: "Enregistrer", greetings: "Bonjour, ",
                   frases: ["La discipline bat l'intelligence.", "L'effort constant porte ses fruits.", "Ne t'arr√™te pas avant d'√™tre fier.", "La sagesse es le silence du sage.", "Concentrez-vous sur le progr√®s, pas la perfection.", "Chaque pas compte dans votre voyage num√©rique.", "Le succ√®s est la somme de petits efforts."] },
            "he": { name: "Hebreo üáÆüá±", title: "◊û◊™◊®◊í◊ù", mentality: "◊û◊†◊ò◊ú◊ô◊ï◊™", discover: "◊û◊î ◊†◊í◊ú◊î ◊î◊ô◊ï◊ù?", input: "◊õ◊™◊ï◊ë ◊ò◊ß◊°◊ò", translate: "◊™◊®◊í◊ù", web: "◊û◊™◊®◊í◊ù ◊ê◊™◊®◊ô◊ù", history: "◊î◊ô◊°◊ò◊ï◊®◊ô◊î", favs: "◊û◊ï◊¢◊ì◊§◊ô◊ù ‚òÖ", clear: "◊û◊ó◊ß ◊î◊õ◊ú", analyzing: "◊û◊†◊™◊ó...", welcome: "◊ë◊®◊ï◊õ◊ô◊ù ◊î◊ë◊ê◊ô◊ù ◊ú◊õ◊ú◊ô ◊î◊™◊®◊í◊ï◊ù ◊î◊ì◊ô◊í◊ô◊ò◊ú◊ô ◊î◊ó◊ô◊†◊û◊ô ◊©◊ú◊ö", namePh: "◊î◊©◊ù ◊©◊ú◊ö ◊õ◊ê◊ü", btnStart: "◊î◊™◊ó◊ú", btnNext: "◊î◊ë◊ê", search: "◊ó◊§◊© ◊û◊ï◊©◊í...", dict: "◊û◊ô◊ú◊ï◊ü ◊¢◊ï◊ú◊û◊ô", resFound: "◊†◊û◊¶◊ê◊î ◊™◊©◊ï◊ë◊î", ocean: "üåë ◊ê◊ï◊ß◊ô◊ô◊†◊ï◊°", neon: "üß¨ ◊†◊ô◊ê◊ï◊ü", gold: "‚ú® ◊ñ◊î◊ë", emerald: "üåø ◊ê◊û◊®◊ú◊ì", ruby: "üåπ ◊®◊ï◊ë◊ô", obsidian: "üåë ◊ê◊ï◊ë◊°◊ô◊ì◊ô◊ê◊ü", starTitle: "◊©◊û◊ï◊® ◊ò◊ß◊°◊ò ◊ê◊ï ◊õ◊™◊ï◊ë◊™", starClose: "◊°◊í◊ï◊®", starSave: "◊©◊û◊ï◊®", greetings: "◊©◊ú◊ï◊ù, ",
                   frases: ["◊û◊©◊û◊¢◊™ ◊û◊†◊¶◊ó◊™ ◊ê◊ô◊†◊ò◊ú◊ô◊í◊†◊¶◊ô◊î.", "◊û◊ê◊û◊• ◊û◊™◊û◊ô◊ì ◊û◊©◊™◊ú◊ù.", "◊ê◊ú ◊™◊§◊°◊ô◊ß ◊¢◊ì ◊©◊™◊î◊ô◊î ◊í◊ê◊î.", "◊ó◊õ◊û◊î ◊î◊ô◊ê ◊©◊™◊ô◊ß◊™ ◊î◊ó◊õ◊ù.", "◊î◊™◊û◊ß◊ì ◊ë◊î◊™◊ß◊ì◊û◊ï◊™, ◊ú◊ê ◊ë◊©◊ú◊û◊ï◊™.", "◊õ◊ú ◊¶◊¢◊ì ◊†◊ó◊©◊ë ◊ë◊û◊°◊¢ ◊î◊ì◊ô◊í◊ô◊ò◊ú◊ô ◊©◊ú◊ö.", "◊î◊¶◊ú◊ó◊î ◊î◊ô◊ê ◊°◊õ◊ï◊ù ◊©◊ú ◊û◊ê◊û◊¶◊ô◊ù ◊ß◊ò◊†◊ô◊ù."] },
            "it": { name: "Italiano üáÆüáπ", title: "TRADUTTORE", mentality: "MENTALIT√Ä", discover: "Cosa scopriremo oggi?", input: "Scrivi un testo", translate: "TRADUCI", web: "TRADUTTORE WEB", history: "Cronologia", favs: "Preferiti ‚òÖ", clear: "Cancella Tutto", analyzing: "ANALIZZANDO...", welcome: "Benvenuto nel tuo strumento di traduzione digitale gratuito", namePh: "Il tuo nome qui", btnStart: "INIZIA", btnNext: "AVANTI", search: "Cerca concetto...", dict: "Dizionario Globale", resFound: "Risposta Trovata", ocean: "üåë Oceano", neon: "üß¨ Neon", gold: "‚ú® Oro", emerald: "üåø Smeraldo", ruby: "üåπ Rubino", obsidian: "üåë Ossidiana", starTitle: "SALVA TESTO O URL", starClose: "Chiudi", starSave: "Salva", greetings: "Ciao, ",
                   frases: ["La disciplina batte l'intelligenza.", "Lo sforzo costante paga.", "Non fermarti finch√© non sei orgoglioso.", "La saggezza √® il silenzio del saggio.", "Concentrati sul progresso, non sulla perfezione.", "Ogni passo conta nel tuo viaggio digitale.", "Il successo √® la somma di piccoli sforzi."] },
            "tr": { name: "T√ºrk√ße üáπüá∑", title: "√áEVƒ∞RMEN", mentality: "Zƒ∞HNƒ∞YET", discover: "Bug√ºn ne ke≈üfedeceƒüiz?", input: "Metin yazƒ±n", translate: "√áEVƒ∞R", web: "WEB √áEVƒ∞RMENƒ∞", history: "Ge√ßmi≈ü", favs: "Favoriler ‚òÖ", clear: "Hepsini Sil", analyzing: "ANALƒ∞Z EDƒ∞Lƒ∞YOR...", welcome: "√úcretsiz Dijital √áeviri Aracƒ±nƒ±za Ho≈ü Geldiniz", namePh: "Adƒ±nƒ±z buraya", btnStart: "BA≈ûLAT", btnNext: "ƒ∞LERƒ∞", search: "Kavram ara...", dict: "K√ºresel S√∂zl√ºk", resFound: "Cevap Bulundu", ocean: "üåë Okyanus", neon: "üß¨ Neon", gold: "‚ú® Altƒ±n", emerald: "üåø Z√ºmr√ºt", ruby: "üåπ Yakut", obsidian: "üåë Obsidyen", starTitle: "METƒ∞N VEYA URL KAYDET", starClose: "Kapat", starSave: "Kaydet", greetings: "Merhaba, ",
                   frases: ["Disiplin zekayƒ± yener.", "S√ºrekli √ßaba meyvesini verir.", "Gurur duyana kadar durma.", "Bilgelik bilgenin sessizliƒüidir.", "M√ºkemmelliƒüe deƒüil, ilerlemeye odaklan.", "Dijital yolculuƒüunuzda her adƒ±m √∂nemlidir.", "Ba≈üarƒ±, k√º√ß√ºk √ßabalarƒ±n toplamƒ±dƒ±r."] },
            "pl": { name: "Polski üáµüá±", title: "T≈ÅUMACZ", mentality: "MENTALNO≈öƒÜ", discover: "Co dzisiaj odkryjemy?", input: "Wpisz tekst", translate: "T≈ÅUMACZ", web: "T≈ÅUMACZ WEB", history: "Historia", favs: "Ulubione ‚òÖ", clear: "Usu≈Ñ wszystko", analyzing: "ANALIZA...", welcome: "Witaj w darmowym cyfrowym narzƒôdziu do t≈Çumaczenia", namePh: "Twoje imiƒô", btnStart: "START", btnNext: "DALEJ", search: "Szukaj pojƒôcia...", dict: "Globalny S≈Çownik", resFound: "Znaleziono odpowied≈∫", ocean: "üåë Ocean", neon: "üß¨ Neon", gold: "‚ú® Z≈Çoto", emerald: "üåø Szmaragd", ruby: "üåπ Rubin", obsidian: "üåë Obsydian", starTitle: "ZAPISZ TEKST LUB URL", starClose: "Zamknij", starSave: "Zapisz", greetings: "Cze≈õƒá, ",
                   frases: ["Dyscyplina bije inteligencjƒô.", "Sta≈Çy wysi≈Çek pop≈Çaca.", "Nie przestawaj, dop√≥ki nie bƒôdziesz dumny.", "MƒÖdro≈õƒá to milczenie mƒôdrca.", "Skup siƒô na postƒôpie, a nie na perfekcji.", "Ka≈ºdy krok liczy siƒô w Twojej cyfrowej podr√≥≈ºy.", "Sukces to suma ma≈Çych wysi≈Çk√≥w."] },
            "vi": { name: "Ti·∫øng Vi·ªát üáªüá≥", title: "M√ÅY D·ªäCH", mentality: "T∆Ø DUY", discover: "H√¥m nay ch√∫ng ta s·∫Ω kh√°m ph√° g√¨?", input: "Nh·∫≠p vƒÉn b·∫£n", translate: "D·ªäCH", web: "D·ªäCH WEB", history: "L·ªãch s·ª≠", favs: "Y√™u th√≠ch ‚òÖ", clear: "X√≥a t·∫•t c·∫£", analyzing: "ƒêANG PH√ÇN T√çCH...", welcome: "Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi c√¥ng c·ª• d·ªãch thu·∫≠t k·ªπ thu·∫≠t s·ªë mi·ªÖn ph√≠", namePh: "T√™n c·ªßa b·∫°n", btnStart: "B·∫ÆT ƒê·∫¶U", btnNext: "TI·∫æP THEO", search: "T√¨m ki·∫øm kh√°i ni·ªám...", dict: "T·ª´ ƒëi·ªÉn To√†n c·∫ßu", resFound: "ƒê√£ t√¨m th·∫•y c√¢u tr·∫£ l·ªùi", ocean: "üåë ƒê·∫°i d∆∞∆°ng", neon: "üß¨ Neon", gold: "‚ú® V√†ng", emerald: "üåø Ng·ªçc l·ª•c b·∫£o", ruby: "üåπ H·ªìng ng·ªçc", obsidian: "üåë ƒê√° v·ªè chai", starTitle: "L∆ØU VƒÇN B·∫¢N HO·∫∂C URL", starClose: "ƒê√≥ng", starSave: "L∆∞u", greetings: "Xin ch√†o, ",
                   frases: ["K·ª∑ lu·∫≠t ƒë√°nh b·∫°i s·ª± th√¥ng minh.", "N·ªó l·ª±c kh√¥ng ng·ª´ng s·∫Ω c√≥ k·∫øt qu·∫£.", "ƒê·ª´ng d·ª´ng l·∫°i cho ƒë·∫øn khi b·∫°n t·ª± h√†o.", "Tr√≠ tu·ªá l√† s·ª± im l·∫∑ng c·ªßa ng∆∞·ªùi hi·ªÅn.", "T·∫≠p trung v√†o s·ª± ti·∫øn b·ªô, kh√¥ng ph·∫£i s·ª± ho√†n h·∫£o.", "M·ªçi b∆∞·ªõc ƒëi ƒë·ªÅu quan tr·ªçng trong h√†nh tr√¨nh k·ªπ thu·∫≠t s·ªë.", "Th√†nh c√¥ng l√† t·ªïng h·ª£p c·ªßa nh·ªØng n·ªó l·ª±c nh·ªè."] },
            "id": { name: "Indonesia üáÆüá©", title: "PENERJEMAH", mentality: "MENTALITAS", discover: "Apa yang akan kita temukan hari ini?", input: "Tulis teks", translate: "TERJEMAHKAN", web: "PENERJEMAH WEB", history: "Riwayat", favs: "Favorit ‚òÖ", clear: "Hapus Semua", analyzing: "MENGANALISIS...", welcome: "Selamat Datang di Alat Terjemahan Digital Gratis Anda", namePh: "Nama Anda di sini", btnStart: "MULAI", btnNext: "BERIKUTNYA", search: "Cari konsep...", dict: "Kamus Global", resFound: "Jawaban Ditemukan", ocean: "üåë Lautan", neon: "üß¨ Neon", gold: "‚ú® Emas", emerald: "üåø Zamrud", ruby: "üåπ Rubi", obsidian: "üåë Obsidian", starTitle: "SIMPAN TEKS ATAU URL", starClose: "Tutup", starSave: "Simpan", greetings: "Halo, ",
                   frases: ["Disiplin mengalahkan kecerdasan.", "Usaha terus-menerus membuahkan hasil.", "Jangan berhenti sampai Anda bangga.", "Kebijaksanaan adalah diamnya orang bijak.", "Fokus pada kemajuan, bukan kesempurnaan.", "Setiap langkah berarti dalam perjalanan digital Anda.", "Kesuksesan adalah jumlah dari upaya kecil."] },
            "sv": { name: "Svenska üá∏üá™", title: "√ñVERS√ÑTTARE", mentality: "MENTALITET", discover: "Vad ska vi uppt√§cka idag?", input: "Skriv text", translate: "√ñVERS√ÑTT", web: "WEBB√ñVERS√ÑTTARE", history: "Historik", favs: "Favoriter ‚òÖ", clear: "Rensa allt", analyzing: "ANALYSERAR...", welcome: "V√§lkommen till ditt gratis digitala √∂vers√§ttningsverktyg", namePh: "Ditt namn h√§r", btnStart: "STARTA", btnNext: "N√ÑSTA", search: "S√∂k begrepp...", dict: "Global Ordbok", resFound: "Svar hittat", ocean: "üåë Hav", neon: "üß¨ Neon", gold: "‚ú® Guld", emerald: "üåø Smaragd", ruby: "üåπ Rubin", obsidian: "üåë Obsidian", starTitle: "SPARA TEXT ELLER URL", starClose: "St√§ng", starSave: "Spara", greetings: "Hej, ",
                   frases: ["Disciplin sl√•r intelligens.", "St√§ndig anstr√§ngning l√∂nar sig.", "Sluta inte f√∂rr√§n du √§r stolt.", "Visdom ist den vises tystnad.", "Fokusera p√• framsteg, inte perfektion.", "Varje steg r√§knas p√• din digitala resa.", "Framg√•ng √§r summan av sm√• anstr√§ngningar."] },
            "nl": { name: "Nederlands üá≥üá±", title: "VERTALER", mentality: "MENTALITEIT", discover: "Wat gaan we vandaag ontdekken?", input: "Schrijf tekst", translate: "VERTALEN", web: "WEBVERTALER", history: "Geschiedenis", favs: "Favorieten ‚òÖ", clear: "Alles wissen", analyzing: "ANALYSEREN...", welcome: "Welkom bij uw gratis digitale vertaaltool", namePh: "Uw naam hier", btnStart: "START", btnNext: "VOLGENDE", search: "Zoek concept...", dict: "Wereldwijd Woordenboek", resFound: "Antwoord gevonden", ocean: "üåë Oceaan", neon: "üß¨ Neon", gold: "‚ú® Goud", emerald: "üåø Smaragd", ruby: "üåπ Robijn", obsidian: "üåë Obsidiaan", starTitle: "TEKST OF URL OPSLAAN", starClose: "Sluiten", starSave: "Spara", greetings: "Hallo, ",
                   frases: ["Discipline wint van intelligentie.", "Constante inspanning loont.", "Stop niet totdat je trots bent.", "Wijsheid is de stilte van de wijze.", "Focus op vooruitgang, niet op perfectie.", "Elke stap telt in je digitale reis.", "Succes is de som van kleine inspanningen."] }
        };

        const megaLangs = { "af": "Afrik√°ans üáøüá¶", "sq": "Alban√©s üá¶üá±", "ar": "√Årabe üá∏üá¶", "bn": "Bengal√≠ üáßüá©", "zh": "Chino üá®üá≥", "hr": "Croata üá≠üá∑", "cs": "Checo üá®üáø", "da": "Dan√©s üá©üá∞", "nl": "Holand√©s üá≥üá±", "en": "Ingl√©s üá∫üá∏", "fi": "Finland√©s üá´üáÆ", "fr": "Franc√©s üá´üá∑", "de": "Alem√°n üá©üá™", "el": "Griego üá¨üá∑", "he": "Hebreo üáÆüá±", "hi": "Hindi üáÆüá≥", "hu": "H√∫ngaro üá∫üá∏", "id": "Indonesio üáÆüá©", "it": "Italiano üáÆüáπ", "ja": "Japon√©s üáØüáµ", "ko": "Coreano üá∞üá∑", "no": "Noruego üá≥üá¥", "pl": "Polaco pl", "pt": "Portugu√©s üáßüá∑", "ro": "Rumano üá∑üá¥", "ru": "Ruso üá∑üá∫", "es": "Espa√±ol üá™üá∏", "sv": "Sueco üá∏üá™", "th": "Tailand√©s üáπüá≠", "tr": "Turco üáπüá∑", "uk": "Ucraniano üá∫üá¶", "vi": "Vietnamita üáªüá≥" };
        
        let cropper; 
        let pestanaActual = 'hist';
        let recognition;
        let selectedUILang = 'es';

        window.onload = () => {
            renderLanguageGrid();
            verificarBienvenida();
            populateSelects();
            mostrarHistorial();
            loadLangPrefs();
            setupSpeechRecognition();
        };

        function renderLanguageGrid() {
            const container = document.getElementById('langGridContainer');
            container.innerHTML = '';
            Object.keys(uiLangs).forEach(code => {
                const btn = document.createElement('button');
                btn.className = `lang-btn ${selectedUILang === code ? 'selected' : ''}`;
                btn.id = `btn-lang-${code}`;
                btn.innerText = uiLangs[code].name;
                btn.onclick = () => selectUILanguage(code);
                container.appendChild(btn);
            });
        }

        function selectUILanguage(code) {
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('selected'));
            const target = document.getElementById(`btn-lang-${code}`);
            if(target) target.classList.add('selected');
            selectedUILang = code;
            changeUILanguage(code);
        }

        function changeUILanguage(langCode) {
            const lang = uiLangs[langCode];
            if(!lang) return;
            
            document.getElementById('modal-title-left').innerText = lang.title;
            document.getElementById('ui-title-main').innerText = lang.title;
            document.getElementById('ui-mentality-text').innerText = lang.mentality;
            document.getElementById('ui-discover').innerText = lang.discover;
            document.getElementById('tIn').placeholder = lang.input;
            document.getElementById('btn-translate-main').innerText = lang.translate;
            document.getElementById('ui-web-trans').innerHTML = `<i class="fa-solid fa-earth-americas"></i> ${lang.web}`;
            document.getElementById('tabH').innerText = lang.history;
            document.getElementById('tabF').innerText = lang.favs;
            document.getElementById('ui-clear-all').innerText = lang.clear;
            document.getElementById('ui-analyzing').innerText = lang.analyzing;
            document.getElementById('welcomeMsg').innerText = lang.welcome;
            document.getElementById('userNameInput').placeholder = lang.namePh;
            document.getElementById('btnStart').innerText = lang.btnStart;
            document.getElementById('btnNext').innerText = lang.btnNext;
            document.getElementById('searchInput').placeholder = lang.search;
            document.getElementById('ui-dict-title').innerText = lang.dict;
            
            document.getElementById('opt-ocean').innerText = lang.ocean;
            document.getElementById('opt-neon').innerText = lang.neon;
            document.getElementById('opt-gold').innerText = lang.gold;
            document.getElementById('opt-emerald').innerText = lang.emerald;
            document.getElementById('opt-ruby').innerText = lang.ruby;
            document.getElementById('opt-obsidian').innerText = lang.obsidian;

            document.getElementById('ui-star-title').innerText = lang.starTitle;
            document.getElementById('ui-star-close').innerText = lang.starClose;
            document.getElementById('ui-star-save').innerText = lang.starSave;

            localStorage.setItem('flax_ui_lang', langCode);
            rotarFrase(); 
            
            const user = localStorage.getItem('flax_user');
            if(user) aplicarUser(user);
        }

        function goToStep2() {
            document.getElementById('step1').classList.add('hidden');
            document.getElementById('step2').classList.remove('hidden');
        }

        function rotarFrase() {
            const lang = uiLangs[selectedUILang] || uiLangs['es'];
            let index = parseInt(localStorage.getItem('flax_phrase_idx') || "0");
            if(index >= lang.frases.length) index = 0;
            document.getElementById('phraseMain').innerText = `"${lang.frases[index]}"`;
            localStorage.setItem('flax_phrase_idx', (index + 1) % lang.frases.length);
        }

        function aplicarUser(n) {
            const lang = uiLangs[selectedUILang] || uiLangs['es'];
            document.getElementById('userHeaderName').innerText = n;
            document.getElementById('userNameDisplay').innerText = lang.greetings + n + "!";
        }

        function verificarBienvenida() {
            const user = localStorage.getItem('flax_user');
            const savedLang = localStorage.getItem('flax_ui_lang');
            if (!user) {
                document.getElementById('welcome-modal').style.display = 'flex';
                if(savedLang) {
                    selectedUILang = savedLang;
                    changeUILanguage(savedLang);
                    renderLanguageGrid();
                } else {
                    changeUILanguage('es');
                }
            } else {
                selectedUILang = savedLang || 'es';
                changeUILanguage(selectedUILang);
                aplicarUser(user);
            }
        }

        function guardarUsuario() {
            const name = document.getElementById('userNameInput').value.trim();
            if (name) { 
                localStorage.setItem('flax_user', name); 
                document.getElementById('welcome-modal').style.display = 'none'; 
                aplicarUser(name); 
            }
        }

        async function traducir() {
            const text = document.getElementById('tIn').value.trim();
            if(!text) return;
            document.getElementById('tOut').innerText = "...";
            try {
                const res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${document.getElementById('l1').value}&tl=${document.getElementById('l2').value}&dt=t&q=${encodeURIComponent(text)}`);
                const data = await res.json();
                const result = data[0].map(x => x[0]).join('');
                document.getElementById('tOut').innerText = result;
                guardarEnHistorial(text, "Traducci√≥n");
            } catch(e) { document.getElementById('tOut').innerText = "Error"; }
        }

        function hablarNormal(texto, idioma) {
            if (!texto || texto === "...") return;
            window.speechSynthesis.cancel();
            const mensaje = new SpeechSynthesisUtterance(texto);
            mensaje.lang = idioma;
            window.speechSynthesis.speak(mensaje);
        }

        function hablarTextoTraductor() {
            const t = document.getElementById('tOut').innerText;
            const lang = document.getElementById('l2').value;
            hablarNormal(t, lang);
        }

        function populateSelects() {
            ['l1', 'l2', 'searchLang'].forEach(id => {
                const sel = document.getElementById(id);
                sel.innerHTML = (id === 'l1') ? `<option value="auto">DETECTOR üåê</option>` : '';
                Object.entries(megaLangs).forEach(([code, name]) => {
                    sel.innerHTML += `<option value="${code}">${name}</option>`;
                });
            });
        }

        function saveLangPref(id) { localStorage.setItem('flax_pref_' + id, document.getElementById(id).value); }
        function loadLangPrefs() {
            ['l1', 'l2', 'searchLang'].forEach(id => {
                const val = localStorage.getItem('flax_pref_' + id);
                if (val) document.getElementById(id).value = val;
                else if (id === 'l2') document.getElementById(id).value = 'en';
                else if (id === 'searchLang') document.getElementById(id).value = 'es';
            });
        }

        function setupSpeechRecognition() {
            if ('webkitSpeechRecognition' in window) {
                recognition = new webkitSpeechRecognition();
                recognition.onstart = () => document.getElementById('micBtn').classList.add('mic-active');
                recognition.onresult = (e) => { document.getElementById('tIn').value = e.results[0][0].transcript; traducir(); };
                recognition.onend = () => document.getElementById('micBtn').classList.remove('mic-active');
            }
        }

        function toggleMicrofono() { if(recognition) recognition.start(); }
        function buscarDefinicion() { 
            const q = document.getElementById('searchInput').value.trim();
            if(q) { 
                document.getElementById('searchResult').classList.remove('hidden'); 
                guardarEnHistorial(q, "Diccionario");
            }
        }
        function externo(s) {
            const q = document.getElementById('searchInput').value;
            window.open(s === 'google' ? `https://www.google.com/search?q=${q}` : `https://es.wikipedia.org/wiki/${q}`);
        }
        function abrirTraductorWeb() { window.open(`https://translate.google.com/?sl=auto&tl=${document.getElementById('l2').value}&op=websites`, '_blank'); }
        function abrirEscrituraEstrella() { document.getElementById('star-modal').style.display = 'flex'; }
        function cerrarEscrituraEstrella() { document.getElementById('star-modal').style.display = 'none'; }
        
        function confirmarGuardadoEstrella() {
            const val = document.getElementById('starInput').value.trim();
            if(val) { guardarFav(val); cerrarEscrituraEstrella(); document.getElementById('starInput').value = ""; }
        }
        function guardarFavoritoRes() {
            const val = document.getElementById('tOut').innerText;
            if(val !== "...") { guardarFav(val); }
        }
        function guardarFav(val) {
            let f = JSON.parse(localStorage.getItem('flax_favs') || "[]");
            f.unshift({ id: Date.now(), orig: val, tipo: 'Favorito' });
            localStorage.setItem('flax_favs', JSON.stringify(f));
            if(pestanaActual === 'fav') mostrarHistorial();
        }
        function guardarEnHistorial(orig, tipo) {
            let h = JSON.parse(localStorage.getItem('flax_hist') || "[]");
            h.unshift({ id: Date.now(), orig, tipo });
            localStorage.setItem('flax_hist', JSON.stringify(h.slice(0, 30)));
            if(pestanaActual === 'hist') mostrarHistorial();
        }

        function mostrarHistorial() {
            const list = document.getElementById('historialList');
            const data = (pestanaActual === 'hist') ? JSON.parse(localStorage.getItem('flax_hist') || "[]") : JSON.parse(localStorage.getItem('flax_favs') || "[]");
            list.innerHTML = data.map(i => `
                <div class="glass-card p-4 flex justify-between items-center mb-2 animate-fadeIn" onclick="restaurarTexto('${encodeURIComponent(i.orig)}')">
                    <div class="truncate flex-1">
                        <p class="text-[7px] font-black text-blue-500 uppercase">${i.tipo}</p>
                        <p class="text-sm font-bold truncate text-white">${i.orig}</p>
                    </div>
                    <div class="flex gap-3 ml-2">
                        <button onclick="event.stopPropagation(); copiarManual('${encodeURIComponent(i.orig)}')" class="text-blue-400 text-sm"><i class="fa-solid fa-copy"></i></button>
                        <button onclick="event.stopPropagation(); borrarItem(${i.id})" class="text-red-500 text-sm"><i class="fa-solid fa-trash"></i></button>
                    </div>
                </div>
            `).join('') || '<p class="text-center text-slate-500 py-6 text-[10px]">Vac√≠o</p>';
        }

        function restaurarTexto(textoEscapado) {
            const texto = decodeURIComponent(textoEscapado);
            document.getElementById('tIn').value = texto;
            // Ajuste autom√°tico: Si detectamos que es probable que sea otro idioma, el detector se encarga
            document.getElementById('l1').value = 'auto';
            traducir();
            window.scrollTo({ top: 200, behavior: 'smooth' });
        }

        function copiarManual(txt) {
            navigator.clipboard.writeText(decodeURIComponent(txt));
        }

        function borrarItem(id) {
            const key = (pestanaActual === 'hist') ? 'flax_hist' : 'flax_favs';
            let data = JSON.parse(localStorage.getItem(key) || "[]");
            data = data.filter(item => item.id !== id);
            localStorage.setItem(key, JSON.stringify(data));
            mostrarHistorial();
        }

        document.getElementById('fileIn').onchange = (e) => {
            const file = e.target.files[0]; if(!file) return;
            const reader = new FileReader();
            reader.onload = (ev) => {
                document.getElementById('image-to-edit').src = ev.target.result;
                document.getElementById('editor-modal').style.display = 'flex';
                if (cropper) cropper.destroy();
                cropper = new Cropper(document.getElementById('image-to-edit'), { viewMode: 1 });
            };
            reader.readAsDataURL(file);
        };

        async function procesarImagen() {
            const canvas = cropper.getCroppedCanvas();
            document.getElementById('editor-modal').style.display = 'none';
            document.getElementById('scan-loader').style.display = 'flex';
            
            try {
                // Tesseract analiza r√°pido orientando a espa√±ol e ingl√©s
                const { data: { text } } = await Tesseract.recognize(canvas, 'eng+spa');
                document.getElementById('tIn').value = text.trim();
                document.getElementById('l1').value = 'auto'; // Detector activado para la foto
                traducir();
            } catch (error) {
                console.error(error);
            } finally {
                document.getElementById('scan-loader').style.display = 'none';
                // Reset del input file para poder subir la misma foto o cambiar sin error
                document.getElementById('fileIn').value = "";
                if (cropper) cropper.destroy();
            }
        }

        function copiarTexto(id) { navigator.clipboard.writeText(document.getElementById(id).innerText); }
        function borrarTextoTraductor() { document.getElementById('tIn').value = ""; document.getElementById('tOut').innerText = "..."; }
        function borrarBusqueda() { document.getElementById('searchInput').value = ""; document.getElementById('searchResult').classList.add('hidden'); }
        function intercambiarIdiomas() { 
            const a = document.getElementById('l1').value; const b = document.getElementById('l2').value; 
            if(a !== 'auto') { document.getElementById('l1').value = b; document.getElementById('l2').value = a; }
        }
        function cambiarPestana(p) { 
            pestanaActual = p; 
            document.getElementById('tabH').classList.toggle('tab-active', p === 'hist');
            document.getElementById('tabF').classList.toggle('tab-active', p === 'fav');
            mostrarHistorial(); 
        }
        function limpiarTodo() { localStorage.removeItem(pestanaActual==='hist'?'flax_hist':'flax_favs'); mostrarHistorial(); }
        function changeTheme() { document.body.className = "theme-" + document.getElementById('themeSelect').value; }
        function cancelarEdicion() { 
            document.getElementById('editor-modal').style.display = 'none'; 
            document.getElementById('fileIn').value = "";
        }
        function compartirWhatsApp() { const t = document.getElementById('tOut').innerText; if(t !== "...") window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(t)}`); }
    </script>
</body>
</html>
